Usage: PROG [options ...] [PATTERN ...]

Date filtering:
    -d, --since DATE        Match after DATE
    -u, --until DATE        Match before DATE
    -Z, --utc               Parse and print dates as UTC

Participant filtering:
    -t, --to CONTACT        Match recipients
    -f, --from CONTACT      Match sender
    -w, --with CONTACT      Match sender or recipients
    -c, --chat [PATTERN]    With no argument, match any group chat
                            Otherwise PATTERN matches chat name

Message filtering:
    -M, --message PATTERN   Match message text
                            Useful for boolean expressions: -f x --or -M y
    -s, --sent              Only match sent
    -r, --received          Only match received
    -V, --service SRV       Filter by messaging service
                            One of: any|imessage|rcs|sms (default: any)
    -n, --max NUM           Only print top NUM messages
    -a, --all               Allow calling with no conditions
                            (will print every message unless -n)

Link filtering:
    -L, --links [PATTERN]   Find links with URL matching pattern
                            With no argument, find all links
    -Y, --youtube           Find youtube links
    -S, --soundcloud        Find soundcloud links
    -X, --twitter           Find twitter links

Pattern modifiers:
    -C, --smart-case        Case-sensitive only when pattern has uppercase
                            letters (default; turn off with -i or -I)
    -i, --ignore-case       Case-insensitive matches
    -I, --no-ignore-case    Case-sensitive matches
    -q, --literal           Literal string match, no regex
    -x, --regexp            Regexp match (default; turn off with -q)
    -v, --invert-match      Negate next pattern
    -e, --exact             Next pattern must match full string
    -A, --and [PATTERN]     Must also appear with previous condition
    -O, --or [PATTERN]      Either previous or next condition may occur
                            Without argument, affect the following condition

Format:
    --[no-]color            Enable/disable color output (default: yes if tty)
    -W, --no-wrap           Don't wrap text
    -l, --one-line          "[from -> to] message", newlines stripped
                            With --json, disable pretty print
    -U, --urls              Print only URLs in place of message text
                            Prefer canonical URLs if available
                            No change when no link present
    -m, --no-meta           Print only text or capture
                            No from/to headers, link or file details
    -N, --short-names       Shorten participant names like "First L"
                            Truncate chat names if --one-line
    -T, --tiny              Same as --short-names --one-line --urls
    -k, --count             Print total messages found at the end
    -o, --capture [EXPR]    Print only matched string, or EXPR
    -j, --json              JSON output
    -P, --payload           Include payload in JSON
    -R, -z, --reverse       Reverse sort order (oldest first)

Media:
    -F, --files [KIND|KEY:PATTERN]
                            Find messages with files of KIND
                            or matching pattern for KEY
                            KIND: any (default) or images
                            KEY: name, ext, mime
    -b, --list-files        List attached files (default in normal list)
    -B, --no-list-files     Do not list attached files
    -p, --preview [KIND]    Inline image preview (requires terminal support)
                            KIND is some of: images, links; both if not given
    -g, --img, --images     Same as --files=images --preview=images
    -Q, --silence-warnings  Suppress warning messages and hints

Other:
    --version               Print version
    --reset                 Clear and rebuild cache
    -h, --help              Show this help (see more with --help)
    --help-dates            Show detailed DATE help

~~LONG HELP BELOW~~

DATES

  ISO8601 format (time/TZ optional): '2024-12-30', '2024-12-30 12:34'

  Relative format: 4y (years), 1m5w (months+weeks), 30min, 3a (3am today)

  Times default to local unless TZ specified or -Z used. See --help-dates for
  details.

LOGICAL EXPRESSIONS

  Conditions for --from, --chat, and --service are OR'd with others from same
  option. --links, -Y, -X, -S too are all OR'd together.

  Everything else is AND'ed by default. Chains of explicit --and/--or combine
  as a single expression. Then get AND'ed with the rest. ANDs bind before ORs.

  '-f x --or y' is shorthand for '-f x --or -f y'.

  Mixing options is possible: '-fX -O -c -A -Mfoo'.

PATTERNS

  PATTERN or CONTACT is a regular expression.

  CONTACT matches address book information: You can give part of a name, phone
  number, email. It doesn't matter which one a message was sent/received from.

  Smart-case is the default case, which means case-insensitive, unless
  uppercase letters present. Use -q to match literal strings, -i and -I to
  change case sensitivity.

  The flags -q, -x, -i, -I, and -C affect all subsequent patterns.
  -e and -v affect the immediate next pattern only.

CAPTURE

  EXPR is a format string for the message output where you can use capture
  groups (alongside any text).

  - When EXPR omitted, the entire match is presented. ('-o' = '-o"\0"')
  - When it's a digit, that capture group is presented. ('-o1' = '-o"\1"')
  - A comma-separated list of digits outputs those groups joined by space.
  - When it's a format string: "foo \1 bar \2", interpolates the captures.

  For a pattern to be available for capture, it must not be part of a logical
  expression (--and/or) nor negated (-v).

  If multiple message patterns are given, the last is used for capture.

FILES AND IMAGES

  Inline image previews are possible on terminals that support it. We implement
  iTerm and Kitty (Ghostty, etc) protocols.

  Previews are available for links and image files. You can preview both (-p)
  or either (-pi, -pl).

  Filter files by:
    --files                  # messages having any files at all
    --files=images           # with images
    --files=ext:'jpe?g|png'  # with jpeg, jpg, png extensions
    --files=mime:video       # video files
    --files=name:'\bcats?\b' # files with word 'cat' or 'cats' in the name

  JSON output does not include files by default. Use '-b' to include.

OTHER NOTES

  '--to foo' will find a message sent by someone else to a group where foo
  is a member. Use '--sent' will constrain to only messages you sent, and '-vc'
  will exclude group chats entirely.

  When listing links, using '--urls' is advisable so you get a shorter,
  resolved (often canonical) URL.

  Most things can be abbreviated, some combined:
    --rev     = --reverse
    -Vi,r     = --service=imessage --or --service=rcs
    -Fn:bar,i = --files=name:bar --or --files=images

  You cannot combine patterns by comma, but you can use '|': --from 'foo|bar'
  This is generally simpler than using '--or' for same option.

  Most things are regular expressions, even where you don't expect it.
  Cf. file filter above.

EXAMPLES

  PROG pattern                  # Message contents search
  PROG -f Alice pattern         # From Alice
  PROG -d 2024-01-01 pattern    # Since date
  PROG -o '1,2' '(\w+):(\d+)'   # Capture groups
  PROG -eqIf andy@example.com -xit 'pedro|bob' -c
    matches case-sensitive, literal, exact (whole email) andy@example.com
    sender, and case-insensitive regexp recipient, and must be a group chat.
