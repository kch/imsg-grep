Usage: PROG [options ...] [PATTERN ...]

Date filtering:
    -d, --since DATE        Match after DATE
    -u, --until DATE        Match before DATE
    -Z, --utc               Parse and print dates as UTC

Participant filtering:
    -t, --to CONTACT        Match recipients
    -f, --from CONTACT      Match sender
    -w, --with CONTACT      Match sender or recipients
    -c, --chat [PATTERN]    With no argument, match any group chat
                            Otherwise PATTERN matches chat name

Message filtering:
    -M, --message PATTERN   Match message text
                            Useful for boolean expressions: -f x --or -M y
    -s, --sent              Only match sent
    -r, --received          Only match received
    -V, --service SRV       Filter by messaging service
                            One of: any|imessage|rcs|sms (default: any)
    -n, --max NUM           Only print top NUM messages
    -a, --all               Allow calling with no conditions
                            (will print every message unless -n)

Link filtering:
    -L, --links [PATTERN]   Find links with URL matching pattern
                            With no argument, find all links
    -Y, --youtube           Find youtube links
    -S, --soundcloud        Find soundcloud links
    -X, --twitter           Find twitter links

Pattern modifiers:
    -C, --smart-case        Case-sensitive only when pattern has uppercase
                            letters (default; turn off with -i or -I)
    -i, --ignore-case       Case-insensitive matches
    -I, --no-ignore-case    Case-sensitive matches
    -q, --literal           Literal string match, no regex
    -x, --regexp            Regexp match (default; turn off with -q)
    -v, --invert-match      Negate next pattern
    -E, --exact             Next pattern must match full string
    -A, --and [PATTERN]     Must also appear with previous condition
    -O, --or [PATTERN]      Either previous or next condition may occur
                            Without argument, affect the following condition
                            See --help-bools for more

Format:
    --[no-]color            Enable/disable color output (default: yes if tty)
    -W, --no-wrap           Don't wrap text
    -l, --one-line          "[from -> to] message", newlines stripped
                            With --json, disable pretty print
    -U, --urls              Print only URLs in place of message text
                            Prefer canonical URLs if available
                            No change when no link present
    -m, --no-meta           Print only text or capture
                            No from/to headers, link or file details
    -N, --short-names       Shorten participant names like "First L"
                            Truncate chat names if --one-line
    -T, --tiny              Same as --short-names --one-line --urls
    -k, --count             Print total messges found at the end
    -o, --capture [EXPR]    Print only matched string, or EXPR
    -j, --json              JSON output
    -P, --payload           Include payload in JSON
    -R, -z, --reverse       Reverse sort order (oldest first)

Media:
    -F, --files [KIND|KEY:PATTERN]
                            Find messages with files of KIND
                            or matching pattern for KEY
                            KIND: any (default) or images
                            KEY: name, ext, mime
    -b, --list-files        List attached files (default in normal list)
    -B, --no-list-files     Do not list attached files
    -p, --preview [KIND]    Inline image preview (requires terminal support)
                            KIND is some of: images, links; both if not given
    -g, --img, --images     Same as --files=images --preview=images

Other:
    --version               Print version
    --reset                 Clear and rebuild cache
    -h, --help              Show this help
    --help-dates            Show detailed DATE help
    --help-bools            Show detailed help for logical operations

Conditions for --from, --chat, and --service are OR'd with others from same
option.

--links, -Y, -X, -S too are all OR'd together.

Everything else is AND'ed by default. Chains of explicit --and/--or combine as a
single expression. Then get AND'ed with the rest.

~~H~~

~~HELP~~

# Bools

-f x --or y is valid, as well as -f x --or -f y
Can mix too like -fX -O -cY

# Dates

Two formats supported:

1. ISO8601 format. Time and TZ optional.

Examples

  -d '2024-12-30'
  -d '2024-12-30 12:34'
  -d '2024-12-30T12:45Z'

Times are considered local unless TZ component present in string,
or -Z option used.

2. Relative dates/times:

  -d 4y     # since 4 years ago
  -d 1m5w   # 1 month 5 weeks
  -d 30min  # 30 minutes
  -d 3a     # since 3am today

See --help-dates for more details.

# Patterns

PATTERN or CONTACT is a regular expression.

CONTACT matches a contact's address book information: You can give part of a name, phone number, email.

Smart-case is the default case, which means case-insensitive, unless upcase letters present.

Use -q to match literal strings, -i and -I to change case sensitivity.

Pattern flags (-iICxq) affect all subsequent options. So:

  -Iqf Andy -xit 'pedro|bob' -cfoo

matches literal case-sensitive 'Andy' sender, and case-insensitive regexp recipient, and chat name too.

Matches are partial, if you need to match a full name (or email, etc) use regexp anchors.

# Capture

--capture EXPR
When EXPR omitted, the entire match is presented.
When its a number, that capture group is presented.
When its a format string: "foo \1 bar \2", interpolates the captures.
-o same as -o"\0"
-o1 same as -o"\1"
--o "\3, \2"
Only works if single pattern given
\0 is the full match

-q, -x, -i -I -C only affect all subsequent patterns.

-E, -v affect the immediate next only

can use -x -to a.aa -q -to bbbb

-f a -f b is OR, ie, same opts combine as or. diff opts genereally combine as AND


Examples:
  PROG pattern                   # Basic search
  PROG -f Alice pattern          # From Alice
  PROG -d 2024-01-01 pattern    # Since date
  PROG -o '1,2' '(\w+):(\d+)'   # Capture groups
